# Proposal: Improve Placeholder Format Compatibility

## Why

当前的 `restore` 命令使用精确字符串匹配来还原占位符，但外部工具（如 ChatGPT、文本编辑器、翻译工具）可能会意外修改占位符格式，导致还原失败：

- **空格变化**：`<业务信息[2].系统.名称>` → `< 业务信息 [2]. 系统。名称 >`
- **标点转换**：英文标点 `.` 被替换为中文标点 `。`
- **Unicode 变化**：全角/半角字符转换

这些格式变化虽然保留了占位符的核心信息（实体类型、ID、类别、细节），但由于精确字符串匹配的限制，导致还原失败，影响用户体验，特别是在交互式工作流（`inu interactive`）中。

## What Changes

- 实现占位符归一化逻辑，将实体键和文本中的占位符统一为标准格式进行匹配
- 修改 `RestoreText` 方法，支持模糊匹配带有格式变化的占位符
- 添加测试用例覆盖常见的格式变化场景
- 保持向后兼容，确保原有精确匹配的占位符仍然正常工作

**归一化规则**：
1. 移除 `<` 和 `>` 之间的所有多余空格
2. 将中文标点符号（`。`）转换为英文标点符号（`.`）
3. 将全角字符转换为半角字符
4. 保留实体类型、ID、类别和细节的顺序和内容

**示例**：
- `< 业务信息 [2]. 系统。名称 >` → `<业务信息[2].系统.名称>`
- `<　个人信息　[　0　]　.　姓名　.　张三　>` → `<个人信息[0].姓名.全名>`

## Impact

**受影响的 specs**：
- `cli`：修改 `restore` 命令的占位符匹配逻辑

**受影响的代码**：
- `pkg/anonymizer/anonymizer.go`：`RestoreText` 方法实现
- `pkg/anonymizer/anonymizer_test.go`：添加格式兼容性测试
- `cmd/inu/commands/restore.go`：restore 命令（间接受益，无需修改）
- `cmd/inu/commands/interactive.go`：interactive 命令（间接受益，无需修改）

**用户体验改进**：
- 提高交互式工作流的容错性，减少因外部工具格式化导致的还原失败
- 无需修改用户工作流程，自动适配格式变化
- 保持向后兼容，不影响现有用户

**非破坏性变更**：此变更完全向后兼容，不会影响任何现有功能或数据格式。
